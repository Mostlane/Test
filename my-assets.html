<!DOCTYPE html>
<html>
<head>
  <title>My Assets</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: url('Mostlane_Embossed.png') no-repeat center center fixed;
      background-size: 180%;
      background-color: #e6e8eb;
      font-family: Arial, sans-serif;
    }
    .content {
      background: rgba(255,255,255,0.6);
      padding: 20px;
      border-radius: 12px;
      margin: 40px auto;
      width: 90%;
      max-width: 700px;
    }
    h1 {
      background: #003366;
      color: white;
      padding: 12px;
      margin: -20px -20px 20px -20px;
      border-radius: 12px 12px 0 0;
    }
  </style>
  <script>
    if (sessionStorage.getItem("mostlaneLoggedIn") !== "true") {
      window.location.href = "login.html";
    }
  </script>
  
</head>
<body>
  <div class="content">
    <h1>My Assets</h1>
    <p>This page will list all assets assigned to the logged-in user.</p>
  </div>

<script>
  const username = sessionStorage.getItem("mostlaneUser");
  console.log("Logged in as:", username);

  fetch('assets/assets.json')
    .then(response => response.json())
    .then(data => {
      const container = document.createElement("div");
      let matched = 0;
      data.forEach(asset => {
        if (asset.assignedTo === username) {
          const div = document.createElement("div");
          div.innerHTML = `<strong>${asset.name}</strong><br>Category: ${asset.category}<br>Serial: ${asset.serial}<br>Value: ${asset.value}`;
          div.style.marginBottom = "20px";
          container.appendChild(div);
          matched++;
        }
      });
      if (matched === 0) {
        container.innerHTML = "<p>No assets currently assigned to you.</p>";
      }
      document.querySelector(".content").appendChild(container);
    })
    .catch(error => {
      console.error("Failed to load assets.json:", error);
    });
</script>
</body>
</html>
