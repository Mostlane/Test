<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin – Holiday Approvals</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #e6e8eb url('Mostlane_Embossed.png') no-repeat center center fixed;
      background-size: 180%;
      margin: 0;
      padding: 20px;
    }
    .content-box {
      background: rgba(255,255,255,0.6);
      padding: 20px;
      max-width: 900px;
      margin: auto;
      border-radius: 10px;
    }
    .holiday-entry {
      background: #fff;
      padding: 12px;
      margin-bottom: 12px;
      border-left: 5px solid #004a99;
      border-radius: 6px;
      box-shadow: 0 0 3px rgba(0,0,0,0.1);
    }
    .holiday-entry strong {
      color: #004a99;
    }
    .header {
      text-align: center;
      margin-bottom: 20px;
    }
    h1 {
      color: #004a99;
    }
  </style>
</head>
<body>
  <div class="content-box">
    <div class="header">
      <h1>Holiday Request Admin</h1>
      <p>Showing live data from GitHub</p>
    </div>
    <div id="holidayLogContainer">Loading holiday data…</div>
  </div>

  <script>
    async function fetchHolidayData() {
      const logURL = "https://raw.githubusercontent.com/Mostlane/Test/main/holiday-log.json";
      const summaryURL = "https://raw.githubusercontent.com/Mostlane/Test/main/holiday-summary.json";

      try {
        const [logRes, summaryRes] = await Promise.all([
          fetch(logURL),
          fetch(summaryURL)
        ]);

        if (!logRes.ok || !summaryRes.ok) {
          throw new Error("Failed to fetch one or both JSON files.");
        }

        const logData = await logRes.json();
        const summaryData = await summaryRes.json();

        displayHolidayLog(logData);
      } catch (err) {
        document.getElementById("holidayLogContainer").innerHTML = `<p style="color:red;">Error loading holiday data: ${err.message}</p>`;
      }
    }

    function displayHolidayLog(log) {
      const container = document.getElementById("holidayLogContainer");
      container.innerHTML = "";

      if (!log || log.length === 0) {
        container.innerHTML = "<p>No holiday entries found.</p>";
        return;
      }

      log.forEach(entry => {
        const div = document.createElement("div");
        div.className = "holiday-entry";
        div.innerHTML = `
          <strong>${entry.name}</strong><br>
          ${entry.type} from <strong>${entry.start}</strong> to <strong>${entry.end}</strong><br>
          <em>Status:</em> ${entry.status} | <em>Notes:</em> ${entry.notes || "—"}
        `;
        container.appendChild(div);
      });
    }

    fetchHolidayData();
  </script>
</body>
</html>
