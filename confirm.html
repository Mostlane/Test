<!DOCTYPE html>
<html>
<head>
  <title>Check In Confirmed</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
  <h2>You have successfully logged <span id="statusText"></span></h2>
  <p id="timestamp"></p>
  <div id="map" style="width:90%;margin:auto;height:300px;"></div>
  <a href="checkin.html"><button>Back to Check-In</button></a>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const status = urlParams.get("status");
    const lat = urlParams.get("lat");
    const lon = urlParams.get("lon");

    document.getElementById("statusText").textContent = status;
    document.getElementById("timestamp").textContent = "at " + new Date().toLocaleString();

    const mapFrame = document.createElement("iframe");
    mapFrame.width = "100%";
    mapFrame.height = "300";
    mapFrame.style.border = "0";
    mapFrame.loading = "lazy";
    mapFrame.allowFullscreen = "";
    mapFrame.src = `https://maps.google.com/maps?q=${lat},${lon}&z=15&output=embed`;
    document.getElementById("map").appendChild(mapFrame);
  </script>
</body>
</html>
